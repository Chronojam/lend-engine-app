<?php

namespace AppBundle\Repository;

/**
 * InventoryItemRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class InventoryItemRepository extends \Doctrine\ORM\EntityRepository
{
    /**
     * @return integer
     */
    public function countItems()
    {
        $repository = $this->getEntityManager()->getRepository('AppBundle:InventoryItem');
        $builder = $repository->createQueryBuilder('i');
        $builder->add('select', 'COUNT(i) AS qty');
        $builder->where('i.isActive = 1');
        $query = $builder->getQuery();
        if ( $results = $query->getResult() ) {
            $total = $results[0]['qty'];
        } else {
            $total = 0;
        }
        return $total;
    }
}
